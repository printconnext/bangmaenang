<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ข่าวสารทั้งหมด - ข่าวสารเทศบาลเมืองบางแม่นาง</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            padding-top: 80px;
        }

        /* Add padding since hero is removed */
    </style>
</head>

<body>

    <!-- Header / Navigation -->
    <nav class="navbar" id="navbar">
        <div class="container nav-content">
            <div class="logo-area">
                <img src="logo.png" alt="โลโก้เทศบาล" class="logo-img">
                <div class="logo-text">
                    <h1>บางแม่นาง หมู่ 5</h1>
                    <p>เทศบาลเมืองบางแม่นาง</p>
                </div>
            </div>
            <ul class="nav-links">
                <li><a href="index.html#home">หน้าแรก</a></li>
                <li><a href="#news" class="active">ข่าวสารทั้งหมด</a></li>
                <li><a href="index.html#services">บริการประชาชน</a></li>
                <li><a href="index.html#contact">ติดต่อเรา</a></li>
            </ul>
            <div class="mobile-menu-btn">
                <i class="fa-solid fa-bars"></i>
            </div>
        </div>
    </nav>

    <!-- News & Announcements (Inspired by category 103) -->
    <section class="section" id="news">
        <div class="container">
            <div class="section-header">
                <h2>ข่าวสาร และประกาศ</h2>
                <p>อัปเดตข้อมูลข่าวสารล่าสุดจากหมู่ 5 และเทศบาลเมืองบางแม่นาง</p>
            </div>

            <div class="news-grid" id="all-news-container">
                <!-- Dynamic news will be injected here by JavaScript -->
                <p style="text-align:center; color:#64748b; font-style:italic;">กำลังโหลดข่าวสารทั้งหมด...</p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" id="contact">
        <div class="container footer-content">
            <div class="footer-info">
                <div class="logo-area" style="color: white;">
                    <img src="logo.png" alt="โลโก้เทศบาล" class="logo-img">
                    <div class="logo-text">
                        <h1 style="color:white; font-size:1.5rem;">บางแม่นาง หมู่ 5</h1>
                        <p style="color:#cbd5e1; font-size:0.9rem;">เทศบาลเมืองบางแม่นาง</p>
                    </div>
                </div>
                <p class="footer-desc">เว็บไซต์เพื่อการประชาสัมพันธ์ ข้อมูลข่าวสาร และบริการประชาชน หมู่ 5 ตำบลบางแม่นาง
                    อำเภอบางใหญ่ จังหวัดนนทบุรี</p>
            </div>

            <div class="footer-links">
                <h3>ลิงก์ด่วน</h3>
                <ul>
                    <li><a href="#home">หน้าแรก</a></li>
                    <li><a href="#news">ข่าวประชาสัมพันธ์</a></li>
                    <li><a href="#services">ดาวน์โหลดเอกสาร</a></li>
                    <li><a href="https://bangmaenang.go.th" target="_blank">เว็บเทศบาลเมืองบางแม่นาง</a></li>
                </ul>
            </div>

            <div class="footer-contact">
                <h3>ติดต่อเรา</h3>
                <ul>
                    <li><i class="fa-solid fa-location-dot"></i> ที่ทำการผู้ใหญ่บ้าน หมู่ 5 ต.บางแม่นาง อ.บางใหญ่
                        จ.นนทบุรี</li>
                    <li><i class="fa-solid fa-phone"></i> 02-XXX-XXXX (ผู้ใหญ่บ้าน)</li>
                    <li><i class="fa-brands fa-line"></i> LINE @moo5bangmaenang</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 หมูที่ 5 เทศบาลเมืองบางแม่นาง สงวนลิขสิทธิ์ทั้งหมด | <a href="admin.html"
                    style="color:#94a3b8; text-decoration:none;">ระบบจัดการ (Admin)</a></p>
        </div>
    </footer>

    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Custom Scripts -->
    <script src="supabase-config.js?v=2"></script>
    <script src="script.js?v=2"></script>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            // Give navbar scrolled class immediately since no hero
            document.getElementById('navbar').classList.add('scrolled');

            async function fetchAllNews() {
                const container = document.getElementById('all-news-container');
                if (!container || typeof supabaseClient === 'undefined') return;

                try {
                    const { data: newsItems, error } = await supabaseClient
                        .from('news')
                        .select('*')
                        .order('created_at', { ascending: false });

                    if (error) {
                        console.error('Error fetching news:', error);
                        container.innerHTML = '<p style="text-align:center; color:#ef4444; width:100%;">ไม่สามารถโหลดข้อมูลข่าวสารได้ในขณะนี้ กรุณาลองใหม่อีกครั้ง</p>';
                        return;
                    }

                    if (!newsItems || newsItems.length === 0) {
                        container.innerHTML = '<p style="text-align:center; color:#64748b; width:100%;">ยังไม่มีข่าวสารหรือประกาศในขณะนี้</p>';
                        return;
                    }

                    let html = '';
                    newsItems.forEach(item => {
                        const bgImage = item.image_url ? item.image_url : 'news1.jpg';
                        const dateDisplay = item.date_str || new Date(item.created_at).toLocaleDateString('th-TH');

                        html += `
                        <article class="news-card" style="cursor: pointer;" onclick="window.location.href='news-detail.html?id=${item.id}'">
                            <div class="news-img" style="background-image: url('${bgImage}')"></div>
                            <div class="news-content">
                                <span class="news-date"><i class="fa-regular fa-calendar-alt"></i> ${dateDisplay}</span>
                                <h3>${item.title || 'ไม่มีหัวข้อ'}</h3>
                                <p>${item.content.substring(0, 100)}...</p>
                                <span class="read-more" style="color: var(--primary-color); font-weight: 500; display: inline-flex; align-items: center; gap: 5px;">อ่านต่อ <i class="fa-solid fa-arrow-right"></i></span>
                            </div>
                        </article>
                        `;
                    });

                    container.innerHTML = html;

                } catch (err) {
                    console.error('Exception fetching news:', err);
                    container.innerHTML = '<p style="text-align:center; color:#ef4444; width:100%;">เกิดข้อผิดพลาดในการโหลดข้อมูล</p>';
                }
            }

            fetchAllNews();
        });
    </script>
</body>

</html>